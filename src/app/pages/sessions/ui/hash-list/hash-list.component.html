<div *ngIf="session?.status === 'preparing'">
    <input matInput [readonly]="true" [formControl]="hashRateControl" />
    <button mat-button fill="clear" slot="end" (click)="determine()">
        determine
    </button>
    <br>

    <ng-container *ngTemplateOutlet="console"></ng-container>
</div>

<div *ngIf="session?.status === 'started'">
    <ng-container *ngTemplateOutlet="console"></ng-container>
</div>

<div *ngIf="session?.status === 'stopped'">
    <div *ngIf="user?.status === 'notReady';else userView">
        Session is over, please wait until next round!
    </div>
    <ng-template #userView>
        <span *ngIf="isMe" class="winner">
            WIN!!!!
        </span>
        <span *ngIf="!isMe" class="loser">
            LOSE!!!!
        </span>
        <ul>
            <li>
                <mat-form-field>
                    <mat-label>Winner</mat-label>
                    <input matInput [value]="winner" [readonly]="true">
                </mat-form-field>
            </li>
            <li>
                <mat-form-field>
                    <mat-label>Text</mat-label>
                    <input matInput [value]="winnerBlock.text" [readonly]="true">
                </mat-form-field>
            </li>
            <li>
                <mat-form-field>
                    <mat-label>Hash</mat-label>
                    <input matInput [value]="winnerBlock.hash" [readonly]="true">
                </mat-form-field>
            </li>
        </ul>

        <ng-container *ngTemplateOutlet="console"></ng-container>
    </ng-template>
</div>

<ng-template #console>
    <div class="simulation-console">
        <div class="console-header">
            <img src="assets/bitcoin-btc-logo.svg">
            <span>
                Proof of Work
            </span>
        </div>
        <div class="console-data">
            <table>
                <tr>
                    <th>Text</th>
                    <th>Hash</th>
                    <!-- <th *ngFor="let column of displayedColumns">
                                <span *ngIf="column !== displayedColumns[0]"> | </span> <span> {{column.text}} </span>
                            </th>
                            -->
                </tr>
                <tr *ngFor="let hash of powService.blocks">
                    <td>
                        {{hash.text}}
                    </td>
                    <td>
                        {{hash.hash}}
                    </td>
                    <!--<td *ngFor="let column of displayedColumns">
                                <span *ngIf="column !== displayedColumns[0]"> | </span> {{getValue(hash, column.prop)}}
                            </td>
                        -->
                </tr>

            </table>
        </div>
    </div>

</ng-template>