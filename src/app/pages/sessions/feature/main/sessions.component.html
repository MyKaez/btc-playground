<div *ngIf="vm$ | async as vm;else noSession">
    <button mat-button fill="clear" (click)="logOut()">
        Leave Session
    </button>
    <app-host [vm]="vm"></app-host>

    <mat-tab-group [selectedIndex]="vm.isSessionHost ? 0 : 1">
        <mat-tab>
            <ng-template mat-tab-label>
                Session
            </ng-template>
            <app-session-info [session]="vm.session"></app-session-info>
        </mat-tab>

        <mat-tab *ngIf="!vm.isSessionHost">
            <ng-template mat-tab-label>
                User
            </ng-template>
            <app-user [session]="vm.session" [(user)]="vm.user" [hubConnection]="vm.connection"></app-user>
        </mat-tab>

        <mat-tab>
            <ng-template mat-tab-label>
                Message Center
            </ng-template>
            <app-message-center [session]="vm.session" [user]="vm.user" [messages]="messages"></app-message-center>
        </mat-tab>

    </mat-tab-group>
</div>

<ng-template #noSession>
    <div *ngIf="loading$ | async;else enterData">
        Loading...
    </div>
    <ng-template #enterData>
        Please create a session or hook up into an existing one<br />
        <app-input-session (nameChange)="registerSession($event)"></app-input-session>
        <app-session-list></app-session-list>
    </ng-template>

</ng-template>